plugins {
  id 'build.kotlin-publish-jar'
}

description = "gRPC Spring Boot Server: gRPC server interfaces, functions and utilities for Spring Boot."

java {
  registerFeature('optionalSupport') {
    usingSourceSet(sourceSets.main)
  }
}

dependencies {
  api project(":grpc-spring-boot-core")

  testCompile project(":grpc-spring-boot-starters:grpc-spring-boot-starter-test")
  testCompile project(":grpc-spring-boot-test-protobuf")
  //testCompile "org.springframework.boot:spring-boot-starter-web"
  //testCompile group: 'io.netty', name: 'netty-tcnative', version: '2.0.38.Final'


  kapt platform(project(":grpc-spring-boot-dependencies"))
  kapt "org.springframework.boot:spring-boot-autoconfigure-processor"
  kapt "org.springframework.boot:spring-boot-configuration-processor"

  //developmentOnly "org.springframework.boot:spring-boot-devtools"
}

compileJava.inputs.files(processResources)

test {
  useTestNG()
  include("**/*Test.class", "**/*TestKt.class")
}